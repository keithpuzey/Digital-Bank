def toJson = {
    input ->
    groovy.json.JsonOutput.toJson(input)
}

//   script {
	// Start Blazemeter Functional Test
	echo "Define Test Data"
	def patchOrg = """{"dependencies":{"data":{"kind":"tdm","type":"object","properties":{"FirstName":{"type":"string"},"LastName":{"type":"string"},"EmailAddress":{"type":"string"},"SSN":{"type":"string"},"home_phone":{"type":"string"},"mobile_phone":{"type":"string"},"work_phone":{"type":"string"},"index":{"type":"string"},"dob":{"type":"string"},"address":{"type":"string"},"city":{"type":"string"},"state":{"type":"string"},"zip_code":{"type":"string"},"test":{"type":"string"}},"requirements":{"FirstName":"randlov(0,seedlist(\"firstnames\"))","LastName":"randlov(0, seedlist(\"lastnames\"))","EmailAddress":"(randFromSeedlist(\"firstnames\")+\".\"+randFromSeedlist(\"lastnames\")+\"@gmail.com\").replace(/ /g,\".\")","SSN":"randDigits(3,3)+\"-\"+randDigits(2,2)+\"-\"+randDigits(4,4)","home_phone":"(\"+randDigits(3,3)+\") \"+randDigits(3,3)+\"-\"+randDigits(4,4)","mobile_phone":"(\"+randDigits(3,3)+\") \"+randDigits(3,3)+\"-\"+randDigits(4,4)","work_phone":"(\"+randDigits(3,3)+\") \"+randDigits(3,3)+\"-\"+randDigits(4,4)","index":"randInt(1,100)","dob":"datetime(dateOfBirth(18, 100,now()),\"MM/DD/YYYY\")","address":"valueFromSeedlist(\"usaddress-multicol\", ${index}, 1)","city":"valueFromSeedlist(\"usaddress-multicol\", ${index}, 2) ","state":"valueFromSeedlist(\"usaddress-multicol\", ${index}, 3) ","zip_code":"valueFromSeedlist(\"usaddress-multicol\", ${index}, 4)","test":"test"}}}}"""
      	echo patchOrg
        def dmresponse = httpRequest authentication: 'BMCredentials', customHeaders: [[name: 'Accept', value: '*/*']], contentType: 'APPLICATION_JSON', acceptType: 'APPLICATION_JSON', httpMode: 'PUT', requestBody: patchOrg , url: "https://a.blazemeter.com/api/v4/tests/8969143"
	

// withCredentials([usernamePassword(credentialsId: 'BMCredentials', usernameVariable: 'API Key Id', passwordVariable: 'API Key Secret')]) {

 // available as an env variable, but will be masked if you try to print it  out any which way
 // note: single quotes prevent Groovy interpolation; expansion is by  Bourne Shell, which is what you want
 //  echo $PASSWORD
 // also available as a Groovy variable
 //  echo USERNAME
 // or inside double quotes for string interpolation
//  echo "username is $USERNAME"

//  "curl -D- -u $USERNAME:$PASSWORD -X PUT -H 'Content-Type: application/json' https://a.blazemeter.com/api/v4/tests/8969143"
// }

